# Picloud

Android application that allows you backup your photos.

[Try with Expo](https://expo.dev/@nanddosalas/picloud)

## Features

- See local photos
- Backup photos
- Backup album
- Delete local photos
- Delete backedup photos

# Packages

This project is made up of 3 packages that share code using Yarn Workspaces.

- server (GraphQL TypeScript server)
- controller (GraphQL server Types and Operations generated by GraphQL Code Generator)
- app (React Native app made with Expo)

## Installation

### Prerequisites

1. Create a Google Cloud Storage bucket, [here](https://cloud.google.com/storage/docs/creating-buckets) is the official guide to do it

2. Make data public in the bucket, [here](https://www.youtube.com/watch?v=PoVbGE0HrRA) you can find a guide

3. Create a service account and a service account key

4. Create a Google Client ID for Expo go, you can find more information [here](https://docs.expo.dev/guides/authentication/#google)

### Setup Project

1. Get the code into your local machine and install all dependencies

   ```
   git clone https://github.com/NanddoSalas/picloud.git
   cd picloud
   yarn install
   ```

2. Build the server and controller packages by running `yarn build` at the root of the repo

3. Create a `.env` file at the root of the `server` package and fill the next variables

   ```
   PORT=3000
   SECRET_KEY=SOME_SECRET

   CLIENT_ID=

   GOOGLE_APPLICATION_CREDENTIALS=key.json

   BUCKET_URL=https://[yourBucketName].storage.googleapis.com
   BUCKET_NAME=

   TYPEORM_SYNCHRONIZE=true
   TYPEORM_CONNECTION=sqlite
   TYPEORM_DATABASE="./db.sqlite"
   ```

4. Create a `.env` file at the root of the `app` package and fill the next variables

   ```
   GRAPHQL_URI=http://[yourServerHostIp]:3000/graphql
   EXPO_CLIENT_ID=
   ```

5. Start the server by running `yarn start` at the root of the `server` package

6. Start the app by running `yarn start` at the root of the `app` package

## License

[MIT](https://choosealicense.com/licenses/mit/)
